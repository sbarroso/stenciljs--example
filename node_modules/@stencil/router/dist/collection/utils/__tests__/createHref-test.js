import createBrowserHistory from '../createBrowserHistory';
import createHashHistory from '../createHashHistory';
describe('a browser history', function () {
    describe('with no basename', function () {
        var history;
        beforeEach(function () {
            history = createBrowserHistory();
        });
        it('knows how to create hrefs', function () {
            var href = history.createHref({
                pathname: '/the/path',
                search: '?the=query',
                hash: '#the-hash'
            });
            expect(href).toEqual('/the/path?the=query#the-hash');
        });
    });
    describe('with a basename', function () {
        var history;
        beforeEach(function () {
            history = createBrowserHistory({ basename: '/the/base' });
        });
        it('knows how to create hrefs', function () {
            var href = history.createHref({
                pathname: '/the/path',
                search: '?the=query',
                hash: '#the-hash'
            });
            expect(href).toEqual('/the/base/the/path?the=query#the-hash');
        });
    });
    describe('with a bad basename', function () {
        var history;
        beforeEach(function () {
            history = createBrowserHistory({ basename: '/the/bad/base/' });
        });
        it('knows how to create hrefs', function () {
            var href = history.createHref({
                pathname: '/the/path',
                search: '?the=query',
                hash: '#the-hash'
            });
            expect(href).toEqual('/the/bad/base/the/path?the=query#the-hash');
        });
    });
    describe('with a slash basename', function () {
        var history;
        beforeEach(function () {
            history = createBrowserHistory({ basename: '/' });
        });
        it('knows how to create hrefs', function () {
            var href = history.createHref({
                pathname: '/the/path',
                search: '?the=query',
                hash: '#the-hash'
            });
            expect(href).toEqual('/the/path?the=query#the-hash');
        });
    });
    describe('encoding', function () {
        var history;
        beforeEach(function () {
            history = createBrowserHistory();
        });
        it('does not encode the generated path', function () {
            // encoded
            var encodedHref = history.createHref({
                pathname: '/%23abc'
            });
            // unencoded
            var unencodedHref = history.createHref({
                pathname: '/#abc'
            });
            expect(encodedHref).toEqual('/%23abc');
            expect(unencodedHref).toEqual('/#abc');
        });
    });
});
describe('a hash history', function () {
    describe('with default encoding', function () {
        var history;
        beforeEach(function () {
            history = createHashHistory();
        });
        it('knows how to create hrefs', function () {
            var href = history.createHref({
                pathname: '/the/path',
                search: '?the=query',
                hash: '#the-hash'
            });
            expect(href).toEqual('#/the/path?the=query#the-hash');
        });
    });
    describe('with hashType="noslash"', function () {
        var history;
        beforeEach(function () {
            history = createHashHistory({ hashType: 'noslash' });
        });
        it('knows how to create hrefs', function () {
            var href = history.createHref({
                pathname: '/the/path',
                search: '?the=query',
                hash: '#the-hash'
            });
            expect(href).toEqual('#the/path?the=query#the-hash');
        });
    });
    describe('with hashType="hashbang"', function () {
        var history;
        beforeEach(function () {
            history = createHashHistory({ hashType: 'hashbang' });
        });
        it('knows how to create hrefs', function () {
            var href = history.createHref({
                pathname: '/the/path',
                search: '?the=query',
                hash: '#the-hash'
            });
            expect(href).toEqual('#!/the/path?the=query#the-hash');
        });
    });
    describe('with a basename', function () {
        var history;
        beforeEach(function () {
            history = createHashHistory({ basename: '/the/base' });
        });
        it('knows how to create hrefs', function () {
            var href = history.createHref({
                pathname: '/the/path',
                search: '?the=query'
            });
            expect(href).toEqual('#/the/base/the/path?the=query');
        });
    });
    describe('with a bad basename', function () {
        var history;
        beforeEach(function () {
            history = createHashHistory({ basename: '/the/bad/base/' });
        });
        it('knows how to create hrefs', function () {
            var href = history.createHref({
                pathname: '/the/path',
                search: '?the=query'
            });
            expect(href).toEqual('#/the/bad/base/the/path?the=query');
        });
    });
    describe('with a slash basename', function () {
        var history;
        beforeEach(function () {
            history = createHashHistory({ basename: '/' });
        });
        it('knows how to create hrefs', function () {
            var href = history.createHref({
                pathname: '/the/path',
                search: '?the=query'
            });
            expect(href).toEqual('#/the/path?the=query');
        });
    });
    describe('encoding', function () {
        var history;
        beforeEach(function () {
            history = createHashHistory();
        });
        it('does not encode the generated path', function () {
            // encoded
            var encodedHref = history.createHref({
                pathname: '/%23abc'
            });
            // unencoded
            var unencodedHref = history.createHref({
                pathname: '/#abc'
            });
            expect(encodedHref).toEqual('#/%23abc');
            expect(unencodedHref).toEqual('#/#abc');
        });
    });
});
